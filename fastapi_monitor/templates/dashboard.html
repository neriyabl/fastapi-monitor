<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FastAPI Monitor Dashboard</title>

    <!-- Stylesheets -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', path='/css/main.css') }}"
    />

    <!-- Preload critical resources -->
    <link
      rel="preload"
      href="{{ url_for('static', path='/js/core/EventEmitter.js') }}"
      as="script"
    />
    <link
      rel="preload"
      href="{{ url_for('static', path='/js/components/ThemeManager.js') }}"
      as="script"
    />
  </head>
  <body
    data-theme="{{ theme_mode | default('light') }}"
    data-scheme="{{ color_scheme | default('default') }}"
    class="dashboard-layout"
  >
    <!-- Dashboard Header -->
    <header class="dashboard-header">
      <div class="container dashboard-header__content">
        <div class="dashboard-header__title">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"
            />
          </svg>
          FastAPI Monitor Dashboard
        </div>

        <div class="dashboard-header__actions">
          <!-- Auto-refresh Toggle -->
          <label class="auto-refresh-label">
            <input
              type="checkbox"
              id="auto-refresh-toggle"
              class="sr-only"
              checked
            />
            <div class="toggle-switch"></div>
            <span class="auto-refresh-text">Auto-refresh</span>
          </label>

          <!-- Theme Selector -->
          <div class="theme-selector" id="theme-selector">
            <button class="theme-selector__button" type="button">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  d="M12 18c-.89 0-1.74-.19-2.5-.54C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.46C10.26 6.19 11.11 6 12 6a6 6 0 0 1 0 12z"
                />
              </svg>
              Theme
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path d="M7 10l5 5 5-5z" />
              </svg>
            </button>

            <div class="theme-selector__dropdown" id="theme-dropdown">
              <!-- Theme options will be populated by JavaScript -->
            </div>
          </div>

          <!-- Refresh Button -->
          <button class="btn btn--primary" id="refresh-btn" type="button">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"
              />
            </svg>
            Refresh
          </button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="dashboard-main">
      <div class="container">
        <!-- Statistics Section -->
        <section class="dashboard-section">
          <div class="dashboard-section__header">
            <h2 class="dashboard-section__title">Overview</h2>
          </div>

          <div class="stats-grid" id="stats-container">
            <!-- Stats cards will be populated by JavaScript -->
          </div>
        </section>

        <!-- Recent Requests Section -->
        <section class="dashboard-section">
          <div class="dashboard-section__header">
            <h2 class="dashboard-section__title">Recent Requests</h2>
            <a href="/analytics" class="btn btn--ghost">
              View Analytics
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"
                />
              </svg>
            </a>
          </div>

          <div class="card">
            <div class="card__body">
              <div id="requests-table-container">
                <!-- Requests table will be populated by JavaScript -->
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none">
      <div class="loading-spinner"></div>
    </div>

    <!-- Scripts -->
    <script src="{{ url_for('static', path='/js/core/EventEmitter.js') }}"></script>
    <script src="{{ url_for('static', path='/js/components/ThemeManager.js') }}"></script>
    <script src="{{ url_for('static', path='/js/components/DashboardController.js') }}"></script>
    <script src="{{ url_for('static', path='/js/dashboard.js') }}"></script>
  </body>
</html>
